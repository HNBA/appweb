# Config file for collectd(1).
#
# Some plugins need additional configuration and are disabled by default.
# Please read collectd.conf(5) for details.
#
# You should also read /usr/share/doc/collectd-core/README.Debian.plugins
# b
Hostname "{{ inventory_hostname }}"
FQDNLookup true
BaseDir "/var/lib/collectd"
PluginDir "/usr/lib/collectd"
#TypesDB "/usr/share/collectd/types.db" "/etc/collectd/my_types.db"

#----------------------------------------------------------------------------#
# Interval at which to query values. This may be overwritten on a per-plugin #
# base by using the 'Interval' option of the LoadPlugin block:               #
#----------------------------------------------------------------------------#
Interval 10

#MaxReadInterval 86400
#Timeout         2
#ReadThreads     5
#WriteThreads    5

# Limit the size of the write queue. Default is no limit. Setting up a limit
# is recommended for servers handling a high volume of traffic.
#WriteQueueLimitHigh 1000000
#WriteQueueLimitLow   800000

##############################################################################
# Logging                                                                    #
#----------------------------------------------------------------------------#
# Plugins which provide logging functions should be loaded first, so log     #
# messages generated when loading or configuring other plugins can be        #
# accessed.                                                                  #
##############################################################################

LoadPlugin logfile
<Plugin logfile>
        LogLevel "info"
        File "/var/log/collectd.log"
        Timestamp true
        PrintSeverity false
</Plugin>


LoadPlugin load
#<Plugin load>
#       ReportRelative true
#</Plugin>



LoadPlugin syslog
<Plugin syslog>
        LogLevel "info"
</Plugin>

LoadPlugin interface
<Plugin interface>
    Interface "ens3"
    IgnoreSelected false
</Plugin>


LoadPlugin network
<Plugin network>
    <Server "0.0.0.0" "{{ logstash_collectd_port }}">
    </Server>
</Plugin>

LoadPlugin log_logstash
<Plugin log_logstash>
        LogLevel info
        File "/var/log/collectd.json.log"
</Plugin>

LoadPlugin cpu
<Plugin cpu>
        ReportByState true
        ValuesPercentage false
</Plugin>

#LoadPlugin df
#<Plugin df>
#       Device "/dev/sda1"
#       Device "192.168.0.2:/mnt/nfs"
#       MountPoint "/home"
#       FSType "ext3"

        # ignore rootfs; else, the root file-system would appear twice, causing
        # one of the updates to fail and spam the log
#       FSType rootfs
        # ignore the usual virtual / temporary file-systems
#       FSType sysfs
#       FSType proc
#       FSType devtmpfs
#       FSType devpts
#       FSType tmpfs
#       FSType fusectl
#       FSType cgroup
#       IgnoreSelected true
#
#       ReportByDevice false
#       ReportInodes false
#
#       ValuesAbsolute true
#       ValuesPercentage false
#</Plugin>

LoadPlugin disk
<Plugin disk>
Disk "vda"
#IgnoreSelected false
#UseBSDName false
#UdevNameAttr "DEVNAME"
</Plugin>

LoadPlugin memory
<Plugin memory>
        ValuesAbsolute true
        ValuesPercentage false
</Plugin>

 
#LoadPlugin tail
#<Plugin tail>
#       <File "/var/log/exim4/mainlog">
#               Instance "exim"
#               Interval 60
#               <Match>
#                       Regex "S=([1-9][0-9]*)"
#                       DSType "CounterAdd"
#                       Type "ipt_bytes"
#                       Instance "total"
#               </Match>
#               <Match>
#                       Regex "\\<R=local_user\\>"
#                       ExcludeRegex "\\<R=local_user\\>.*mail_spool defer"
#                       DSType "CounterInc"
#                       Type "counter"
#                       Instance "local_user"
#               </Match>
#       </File>
#</Plugin>

<Include "/etc/collectd/collectd.conf.d">
        Filter "*.conf"
</Include>

